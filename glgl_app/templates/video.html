{% extends "base.html" %}
{% load thumbnail %}
{% block title %}-{{ video.name }}{% endblock %}
{% block content %}
    <div class="dd-video">
        <div class="row">
            <div class="col-md-8">
                <div class="info">
                    <div class="video-title"><h2>{{ video.name }}</h2>
                        <div style="clear:both;"></div>
                    </div>
                    <div class="tminfo"><a href="/">主页</a> >
                    {% for ca in video.category_set.all %}
                        <a href="/category/{{ ca.pk }}">{{ ca.name }}{% if not forloop.last %},{% endif %}</a>
                    {% endfor %}
                    &nbsp;&nbsp;&nbsp;
                    <i id="dianji" title="播放">{{ video.play }}</i>
                    <i id="dm_count" title="弹幕">{{ video.bullet_set.count }}</i>
                    <i id="stow_count" title="收藏">{{ video.collection_videos.count }}</i>
                    &nbsp;&nbsp;&nbsp;
                    <span>上传时间：{{ video.time|date:"Y年m月d日" }}</span>
                </div>
                <div style="clear:both;"></div>
            </div>
            <div class="player">
                <div id="video-id" style="display: none;">{{ video.pk }}</div>
                <video id="video" class="video-js  vjs-default-skin vjs-big-play-centered"
                    controls preload="auto" width="100%" height="400">
                    <source src="{{ video.video.url }}" type='video/mp4'/>
                    <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a
                        web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports
                        HTML5 video</a></p>
                    </video>
                </div>
            </div>
            <div class="col-md-4">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <a href="#">
                            <div class="u-face"><img
                                src={% thumbnail video.owner.image 200x200 box=video.owner.cropping crop detail %}>
                            </div>
                        </a>
                        <div class="r-info">
                            <div class="usname"><a href="/personal/{{ video.owner.id }}"
                            class="name">{{ video.owner.name }}</a></div>
                            <div class="sign">{{ video.owner.describe }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block extracss %}
    <link href="/static/styles/video-js.min.css" rel="stylesheet">
    <link href="/static/styles/video.css" rel="stylesheet">
    <link href="/static/styles/jquery-ui.min.css" rel="stylesheet">
{% endblock %}
{% block extrascripts %}
    <script src="/static/scripts/jquery-ui.min.js"></script>
    <script src="/static/scripts/video.js"></script>
    <script>
    videojs.options.flash.swf = '/static/swf/video-js.swf'
    </script>
    <script src="/static/scripts/ajax-send.js"></script>
    <script src="/static/scripts/video-page-show.js"></script>
    <script src="/static/scripts/video-page-post.js"></script>
    {% if user.is_authenticated %}
        <script src="/static/scripts/video-page-action.js"></script>
        {% if user.can_bullet %}
            <script src="/static/scripts/bullet-send.js"></script>
        {% endif %}
        {% if user.can_comment %}
            <script src="/static/scripts/comment-send.js"></script>
        {% endif %}
        {% if user.is_admin %}
            <script type="text/javascript" src="/static/scripts/video-page-admin.js"></script>
        {% endif %}
        {% if user.pk == video.owner.pk %}
            <script type="text/javascript" src="/static/scripts/video-page-own.js"></script>
        {% endif %}
    {% endif %}
{% endblock %}